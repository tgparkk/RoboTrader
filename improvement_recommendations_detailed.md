# ğŸ¯ ëˆŒë¦¼ëª© ì „ëµ íŒ¨ë°°ìœ¨ ê°ì†Œ ë°©ì•ˆ

## ğŸ“Š í˜„ì¬ ì„±ê³¼
- **ì´ ê±°ë˜**: 325ê°œ (ë¶„ì„ëœ ê±°ë˜: 276ê°œ)
- **ìŠ¹ë¦¬**: 169ê°œ â†’ ë¶„ì„: 147ê±´
- **íŒ¨ë°°**: 156ê°œ â†’ ë¶„ì„: 129ê±´
- **ìŠ¹ë¥ **: 52.0%

## ğŸ” í•µì‹¬ ë°œê²¬ì‚¬í•­

### 1. ê°€ì¥ ì¤‘ìš”í•œ ì§€í‘œ: 5ë¶„ë´‰ ì´í‰ ëŒ€ë¹„ ê°€ê²©ìœ„ì¹˜ (+118.3% ì°¨ì´)
- **íŒ¨ë°° í‰ê· **: 0.12% (ê±°ì˜ ì´í‰ì„  ê·¼ì²˜)
- **ìŠ¹ë¦¬ í‰ê· **: 0.25% (ì´í‰ì„  ìœ„ìª½)
- **ì˜ë¯¸**: 5ë¶„ë´‰ ì´ë™í‰ê· ì„ ë³´ë‹¤ í™•ì‹¤íˆ ìœ„ì— ìˆì„ ë•Œ ìŠ¹ë¥ ì´ 2ë°° ì´ìƒ ë†’ìŒ

### 2. ì¼ë´‰ ì¶”ì„¸ì˜ ì¤‘ìš”ì„± (+25.9% ì°¨ì´)
- **íŒ¨ë°° í‰ê· **: 19.96% (5ì¼ ìƒìŠ¹)
- **ìŠ¹ë¦¬ í‰ê· **: 25.14% (5ì¼ ìƒìŠ¹)
- **ì˜ë¯¸**: ë” ê°•í•œ ìƒìŠ¹ ì¶”ì„¸ì— ìˆëŠ” ì¢…ëª©ì´ ìŠ¹ë¥  ë†’ìŒ

### 3. ë‹¨ê¸° ëª¨ë©˜í…€ (+14.1% ì°¨ì´)
- **íŒ¨ë°° í‰ê· **: 0.84% (5ë´‰ì „ ëŒ€ë¹„)
- **ìŠ¹ë¦¬ í‰ê· **: 0.95% (5ë´‰ì „ ëŒ€ë¹„)
- **ì˜ë¯¸**: ìµœê·¼ 5ê°œ ë´‰ì—ì„œ ë” ê°•í•œ ìƒìŠ¹ì„ ë³´ì¸ ì¢…ëª©ì´ ìœ ë¦¬

### 4. ê±°ë˜ëŸ‰ ì¦ê°€ ì¶”ì„¸ (+13.0% ì°¨ì´)
- **íŒ¨ë°° í‰ê· **: 3.62ë°° (5ë´‰ê°„ ê±°ë˜ëŸ‰ ì¦ê°€)
- **ìŠ¹ë¦¬ í‰ê· **: 4.08ë°° (5ë´‰ê°„ ê±°ë˜ëŸ‰ ì¦ê°€)
- **ì˜ë¯¸**: ê±°ë˜ëŸ‰ì´ ë” ë¹ ë¥´ê²Œ ì¦ê°€í•˜ëŠ” ì¢…ëª©ì´ ìŠ¹ë¥  ë†’ìŒ

### 5. í˜„ì¬ ê±°ë˜ëŸ‰ (+10.5% ì°¨ì´)
- **íŒ¨ë°° í‰ê· **: 0.99ë°° (5ë´‰ í‰ê·  ëŒ€ë¹„)
- **ìŠ¹ë¦¬ í‰ê· **: 1.10ë°° (5ë´‰ í‰ê·  ëŒ€ë¹„)
- **ì˜ë¯¸**: í‰ê·  ì´ìƒì˜ ê±°ë˜ëŸ‰ì—ì„œ ë§¤ìˆ˜í•  ë•Œ ìŠ¹ë¥  ë†’ìŒ

## ğŸ’¡ êµ¬ì²´ì  ê°œì„  ì œì•ˆ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 1: 5ë¶„ë´‰ ì´ë™í‰ê·  í•„í„° (íš¨ê³¼ â˜…â˜…â˜…â˜…â˜…)
```python
# ë§¤ìˆ˜ ì¡°ê±´ ì¶”ê°€
if current_price_vs_ma5 > 0.15:  # 5ë¶„ë´‰ ì´í‰ì„  ëŒ€ë¹„ +0.15% ì´ìƒ
    # ë§¤ìˆ˜ ì§„í–‰
else:
    # ë§¤ìˆ˜ íšŒí”¼
```
**ì˜ˆìƒ íš¨ê³¼**: íŒ¨ë°°ìœ¨ ì•½ 20-30% ê°ì†Œ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 2: ì¼ë´‰ ì¶”ì„¸ í•„í„° (íš¨ê³¼ â˜…â˜…â˜…â˜…â˜†)
```python
# ë§¤ìˆ˜ ì¡°ê±´ ì¶”ê°€
if daily_5day_trend > 22.0:  # 5ì¼ê°„ 22% ì´ìƒ ìƒìŠ¹
    # ë§¤ìˆ˜ ì§„í–‰
else:
    # ë§¤ìˆ˜ íšŒí”¼
```
**ì˜ˆìƒ íš¨ê³¼**: íŒ¨ë°°ìœ¨ ì•½ 15-20% ê°ì†Œ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 3: ê±°ë˜ëŸ‰ ì¡°ê±´ ê°•í™” (íš¨ê³¼ â˜…â˜…â˜…â˜†â˜†)
```python
# ë§¤ìˆ˜ ì¡°ê±´ ì¶”ê°€
volume_conditions = [
    volume_vs_ma5 > 1.0,  # í˜„ì¬ ê±°ë˜ëŸ‰ì´ 5ë´‰ í‰ê·  ì´ìƒ
    volume_trend_5 > 3.5,  # 5ë´‰ê°„ ê±°ë˜ëŸ‰ì´ 3.5ë°° ì´ìƒ ì¦ê°€
]

if all(volume_conditions):
    # ë§¤ìˆ˜ ì§„í–‰
else:
    # ë§¤ìˆ˜ íšŒí”¼
```
**ì˜ˆìƒ íš¨ê³¼**: íŒ¨ë°°ìœ¨ ì•½ 10-15% ê°ì†Œ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 4: ë‹¨ê¸° ëª¨ë©˜í…€ í™•ì¸ (íš¨ê³¼ â˜…â˜…â˜…â˜†â˜†)
```python
# ë§¤ìˆ˜ ì¡°ê±´ ì¶”ê°€
if price_change_5bars > 0.90:  # 5ë´‰ì „ ëŒ€ë¹„ 0.9% ì´ìƒ ìƒìŠ¹
    # ë§¤ìˆ˜ ì§„í–‰
else:
    # ë§¤ìˆ˜ íšŒí”¼
```
**ì˜ˆìƒ íš¨ê³¼**: íŒ¨ë°°ìœ¨ ì•½ 10% ê°ì†Œ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 5: ë³¼ë¦°ì € ë°´ë“œ ìœ„ì¹˜ (íš¨ê³¼ â˜…â˜…â˜†â˜†â˜†)
```python
# ë§¤ìˆ˜ ì¡°ê±´ ì¶”ê°€ (ì„ íƒì‚¬í•­)
if bb_position > 70:  # ë³¼ë¦°ì €ë°´ë“œ í•˜ë‹¨~ìƒë‹¨ ë²”ìœ„ì˜ 70% ì´ìƒ ìœ„ì¹˜
    # ë” ì•ˆì „
```
**ì˜ˆìƒ íš¨ê³¼**: íŒ¨ë°°ìœ¨ ì•½ 5-8% ê°ì†Œ

## ğŸ“‹ í†µí•© í•„í„° ì œì•ˆ

### ë ˆë²¨ 1: ë³´ìˆ˜ì  (ì˜ˆìƒ ìŠ¹ë¥  60%+)
```python
def check_conservative_filter(indicators):
    return (
        indicators['price_vs_ma5'] > 0.20 and
        indicators['daily_trend_5'] > 25.0 and
        indicators['volume_vs_ma5'] > 1.05 and
        indicators['volume_trend_5'] > 4.0 and
        indicators['price_change_5'] > 0.95
    )
```

### ë ˆë²¨ 2: ê· í˜• (ì˜ˆìƒ ìŠ¹ë¥  55-58%)
```python
def check_balanced_filter(indicators):
    return (
        indicators['price_vs_ma5'] > 0.15 and
        indicators['daily_trend_5'] > 22.0 and
        indicators['volume_vs_ma5'] > 1.0 and
        indicators['volume_trend_5'] > 3.5
    )
```

### ë ˆë²¨ 3: ê³µê²©ì  (ì˜ˆìƒ ìŠ¹ë¥  52-55%)
```python
def check_aggressive_filter(indicators):
    return (
        indicators['price_vs_ma5'] > 0.10 and
        indicators['daily_trend_5'] > 20.0 and
        indicators['volume_vs_ma5'] > 0.9
    )
```

## ğŸ“Š ì˜ˆìƒ ê°œì„  íš¨ê³¼

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë³´ìˆ˜ì  í•„í„° ì ìš©
- ê±°ë˜ ìˆ˜: 325 â†’ ~200ê°œ (38% ê°ì†Œ)
- ìŠ¹ë¥ : 52% â†’ 60%+
- ì˜ˆìƒ ìŠ¹ë¦¬: 120ê°œ ì´ìƒ
- ì˜ˆìƒ íŒ¨ë°°: 80ê°œ ì´í•˜
- **ì‹¤ì œ ìˆ˜ìµ ì¦ê°€ ì˜ˆìƒ**: +40-50%

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê· í˜• í•„í„° ì ìš©
- ê±°ë˜ ìˆ˜: 325 â†’ ~250ê°œ (23% ê°ì†Œ)
- ìŠ¹ë¥ : 52% â†’ 56-58%
- ì˜ˆìƒ ìŠ¹ë¦¬: 140-145ê°œ
- ì˜ˆìƒ íŒ¨ë°°: 105-110ê°œ
- **ì‹¤ì œ ìˆ˜ìµ ì¦ê°€ ì˜ˆìƒ**: +20-30%

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê³µê²©ì  í•„í„° ì ìš©
- ê±°ë˜ ìˆ˜: 325 â†’ ~280ê°œ (14% ê°ì†Œ)
- ìŠ¹ë¥ : 52% â†’ 54-55%
- ì˜ˆìƒ ìŠ¹ë¦¬: 150-155ê°œ
- ì˜ˆìƒ íŒ¨ë°°: 125-130ê°œ
- **ì‹¤ì œ ìˆ˜ìµ ì¦ê°€ ì˜ˆìƒ**: +10-15%

## ğŸ”§ êµ¬í˜„ ë°©ë²•

### 1ë‹¨ê³„: ê¸°ìˆ  ì§€í‘œ ê³„ì‚° í•¨ìˆ˜ ì¶”ê°€
```python
def calculate_technical_indicators(minute_df, daily_df, buy_idx):
    """ë§¤ìˆ˜ ì‹œì ì˜ ê¸°ìˆ  ì§€í‘œ ê³„ì‚°"""

    # ì´ë™í‰ê· 
    minute_df['ma5'] = minute_df['close'].rolling(5).mean()
    minute_df['ma20'] = minute_df['close'].rolling(20).mean()

    # ë³¼ë¦°ì € ë°´ë“œ
    minute_df['bb_middle'] = minute_df['close'].rolling(20).mean()
    bb_std = minute_df['close'].rolling(20).std()
    minute_df['bb_upper'] = minute_df['bb_middle'] + (bb_std * 2)
    minute_df['bb_lower'] = minute_df['bb_middle'] - (bb_std * 2)

    # RSI
    delta = minute_df['close'].diff()
    gain = delta.where(delta > 0, 0).rolling(14).mean()
    loss = -delta.where(delta < 0, 0).rolling(14).mean()
    rs = gain / loss
    minute_df['rsi'] = 100 - (100 / (1 + rs))

    # ê±°ë˜ëŸ‰ ì´í‰
    minute_df['volume_ma5'] = minute_df['volume'].rolling(5).mean()
    minute_df['volume_ma20'] = minute_df['volume'].rolling(20).mean()

    # ë§¤ìˆ˜ ì‹œì  ë°ì´í„°
    current = minute_df.iloc[buy_idx]
    prev_5 = minute_df.iloc[buy_idx-5:buy_idx]

    indicators = {
        'price_vs_ma5': (current['close'] - current['ma5']) / current['ma5'] * 100,
        'volume_vs_ma5': current['volume'] / current['volume_ma5'],
        'volume_trend_5': prev_5['volume'].iloc[-1] / prev_5['volume'].iloc[0],
        'price_change_5': (current['close'] - prev_5['close'].iloc[0]) / prev_5['close'].iloc[0] * 100,
        'bb_position': (current['close'] - current['bb_lower']) / (current['bb_upper'] - current['bb_lower']) * 100,
    }

    # ì¼ë´‰ ì¶”ì„¸
    if daily_df is not None and len(daily_df) >= 5:
        daily_close = pd.to_numeric(daily_df['stck_clpr'])
        indicators['daily_trend_5'] = (daily_close.iloc[0] - daily_close.iloc[4]) / daily_close.iloc[4] * 100

    return indicators
```

### 2ë‹¨ê³„: ê¸°ì¡´ ì „ëµì— í•„í„° ì¶”ê°€
```python
# ê¸°ì¡´ ëˆŒë¦¼ëª© íŒ¨í„´ ê°ì§€ ì½”ë“œì—ì„œ
if is_pullback_pattern_detected():

    # ê¸°ìˆ  ì§€í‘œ ê³„ì‚°
    indicators = calculate_technical_indicators(minute_df, daily_df, current_idx)

    # í•„í„° ì ìš© (ê· í˜• ëª¨ë“œ ì˜ˆì‹œ)
    if check_balanced_filter(indicators):
        # ë§¤ìˆ˜ ì§„í–‰
        execute_buy()
    else:
        # í•„í„° í†µê³¼ ëª»í•¨ - ë§¤ìˆ˜ íšŒí”¼
        log_filtered_signal(stock_code, reason="technical_filter")
```

### 3ë‹¨ê³„: ë°±í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦
```python
# D:\GIT\RoboTrader\backtest_with_filters.py ìƒì„±
# - ê³¼ê±° ë°ì´í„°ë¡œ ê° í•„í„° ë ˆë²¨ë³„ ì„±ê³¼ ì¸¡ì •
# - ìµœì  íŒŒë¼ë¯¸í„° íŠœë‹
```

## ğŸ“ ìƒì„±ëœ íŒŒì¼

1. **trade_analysis_results.csv**: ì§€í‘œë³„ ë¹„êµ ìš”ì•½
2. **losing_trades_detail.csv**: íŒ¨ë°° ê±°ë˜ ìƒì„¸ (129ê±´)
3. **winning_trades_detail.csv**: ìŠ¹ë¦¬ ê±°ë˜ ìƒì„¸ (147ê±´)

ì´ íŒŒì¼ë“¤ì„ ì—´ì–´ì„œ ë” ìƒì„¸í•œ íŒ¨í„´ì„ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¬ ë‹¤ìŒ ë‹¨ê³„

1. âœ… íŒ¨ë°° ê±°ë˜ ë¶„ì„ ì™„ë£Œ
2. â¬œ í•„í„° ì½”ë“œ êµ¬í˜„
3. â¬œ ë°±í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
4. â¬œ ì‹¤ì „ ì ìš© ë° ëª¨ë‹ˆí„°ë§

## âš ï¸ ì£¼ì˜ì‚¬í•­

- í•„í„°ë¥¼ ë„ˆë¬´ ì—„ê²©í•˜ê²Œ í•˜ë©´ ê±°ë˜ ê¸°íšŒê°€ í¬ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤
- ì‹œì¥ ìƒí™©ì— ë”°ë¼ ìµœì  íŒŒë¼ë¯¸í„°ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ë°˜ë“œì‹œ ë°±í…ŒìŠ¤íŠ¸ë¡œ ê²€ì¦ í›„ ì ìš©í•˜ì„¸ìš”
- ì²˜ìŒì—” "ê· í˜• í•„í„°"ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤
